{"version":3,"file":"liars.es5.js","sources":["../src/logger.ts","../src/liars.ts"],"sourcesContent":["export interface Log {\n  log: string\n  timestamp: number\n}\n\nexport class Logger {\n  logs: Log[] = []\n  addLog(log: string) {\n    const LogWithTimestamp = { log, timestamp: Date.now() }\n    this.logs = [...this.logs, LogWithTimestamp]\n  }\n\n  addLogs(logs: string[]) {\n    this.addLog(logs.join('\\n'))\n  }\n\n  printAll() {\n    this.logs.forEach(log => {\n      console.log(`[${new Date(log.timestamp)}]`)\n      console.log(log.log)\n    })\n  }\n}\n","import { mockLobby, mockPlayers } from '../test/mocks'\nimport { Logger } from './logger'\ninterface Player {\n  id: number\n  name: string\n}\ninterface GamePlayer extends Player {\n  hand: number[]\n}\n\ninterface UserSettings {\n  numberOfStartingDice?: number\n}\ninterface Settings {\n  numberOfStartingDice: number\n}\n\ninterface Bid {\n  face: number\n  quantity: number\n}\n\ninterface PlayerBid extends Bid {\n  playerId: Player['id']\n}\n\nenum GameState {\n  'Open',\n  'In Progress',\n  'Closed'\n}\n\nexport class Liars {\n  players: GamePlayer[] = []\n  roundHistory: PlayerBid[][] = []\n  bids: PlayerBid[] = []\n  currentPlayerIndex: number = -1\n  winners: GamePlayer[] = []\n  losers: GamePlayer[] = []\n  gameState: GameState = GameState.Open\n  defaultSettings: Settings = {\n    numberOfStartingDice: 5\n  }\n  settings: Settings\n  validFaces: number[] = [1, 2, 3, 4, 5, 6]\n  logger: Logger = new Logger()\n\n  constructor(public id: number, private userSettings: UserSettings) {\n    this.settings = { ...this.defaultSettings, ...userSettings }\n  }\n\n  startGame() {\n    this.currentPlayerIndex = Math.floor(Math.random() * this.players.length)\n    this.dealDice(this.settings.numberOfStartingDice)\n    this.logRoundState()\n  }\n\n  logRoundState() {\n    let messages = [\n      `There are ${this.totalNumberOfDice} dice left in the game`,\n      ...this.players.map(player => {\n        return `${player.name} has ${player.hand.length} dice remaining`\n      }),\n      ...this.bids.map(bid => {\n        const player = this.getPlayerById(bid.playerId)\n        return `${player && player.name} bid ${bid.quantity},${bid.face}`\n      })\n    ]\n    this.logger.addLogs(messages)\n  }\n\n  get gameStateText() {\n    return Object.values(GameState)[this.gameState]\n  }\n\n  private dealDice(numberOfStartingDice: number) {\n    this.players = this.players.map(player => {\n      player.hand = this.generateHand(numberOfStartingDice)\n      return player\n    })\n  }\n\n  private generateHand(numberOfDice: number) {\n    return new Array(numberOfDice).fill(undefined).map(() => Math.floor(Math.random() * 6) + 1)\n  }\n  get allDice() {\n    return this.players.flatMap(player => player.hand)\n  }\n\n  get totalNumberOfDice() {\n    return this.allDice.length\n  }\n  getNumberOfDiceWithFace(target: number) {\n    return this.allDice.filter(die => die === target).length\n  }\n\n  private convertPlayerToGamePlayer(player: Player) {\n    return { ...player, hand: [] }\n  }\n\n  addPlayer(player: Player) {\n    this.players = [...this.players, this.convertPlayerToGamePlayer(player)]\n  }\n\n  addPlayers(players: Player[]) {\n    this.players = [...this.players, ...players.map(this.convertPlayerToGamePlayer)]\n  }\n\n  removePlayer(playerId: number) {\n    this.players = this.players.filter(player => player.id !== playerId)\n  }\n\n  getCurrentPlayer() {\n    return this.players[this.currentPlayerIndex]\n  }\n\n  setCurrentPlayer(playerId: Player['id']) {\n    const index = this.players.findIndex(player => player.id === playerId)\n    if (index < 0) {\n      throw new Error('Player not Found')\n    } else {\n      this.currentPlayerIndex = index\n    }\n  }\n\n  getCurrentBid() {\n    if (this.bids.length > 0) {\n      return this.bids[this.bids.length - 1]\n    }\n    throw new Error(`Current Bid Doesn't exist`)\n  }\n\n  convertBidToPlayerBid(bid: Bid): PlayerBid {\n    return { ...bid, playerId: this.getCurrentPlayer().id }\n  }\n\n  getPlayerById(id: Player['id']) {\n    return this.players.find(player => player.id === id)\n  }\n\n  getNextPlayer() {\n    return (this.currentPlayerIndex + 1) % this.players.length\n  }\n\n  makeBid(bid: Bid) {\n    try {\n      this.validateBid(bid)\n      this.bids = [...this.bids, this.convertBidToPlayerBid(bid)]\n      this.logRoundState()\n      this.currentPlayerIndex = this.getNextPlayer()\n      return true\n    } catch (error) {\n      return error\n    }\n  }\n\n  doesATrumpB(a: number, b: number) {\n    if (a === b) return 0\n    if (a === 1) return 1\n    if (a > b) return 1\n    return -1\n  }\n\n  isFaceValid(face: number) {\n    return this.validFaces.includes(face)\n  }\n\n  validateBid(bid: Bid) {\n    if (!this.isFaceValid(bid.face)) {\n      throw new Error(`That face doesn't exist in ${this.validFaces.toString()}`)\n    }\n    if (this.bids.length > 0) {\n      this.validatePotentialBidAgainstCurrent(bid, this.getCurrentBid())\n    }\n  }\n\n  validatePotentialBidAgainstCurrent(potentialBid: Bid, currentBid: Bid) {\n    if (potentialBid.quantity === currentBid.quantity) {\n      if (this.doesATrumpB(potentialBid.face, currentBid.face) <= 0) {\n        throw new Error(`If the quantity of dice is the same, the face must be higher`)\n      }\n    }\n    if (potentialBid.face === currentBid.face) {\n      if (potentialBid.quantity <= currentBid.quantity) {\n        throw new Error(\n          `If the face of the dice is the same as the last bid, the quantity must be higher`\n        )\n      }\n    }\n    if (potentialBid.face > currentBid.face && potentialBid.quantity < currentBid.quantity) {\n      throw new Error(\n        `If the face of the die is greater than the last bid, the quantity must be greater than or the same`\n      )\n    }\n  }\n  validateLiarCall() {\n    if (this.bids.length < 1) {\n      throw new Error(`You can't call 'liar' if there are no previous bids`)\n    }\n  }\n\n  callLiar() {\n    try {\n      this.validateLiarCall()\n      const currentBid = this.getCurrentBid()\n      const actualNumberOfDie = this.getNumberOfDiceWithFace(currentBid.face)\n      if (currentBid.quantity === actualNumberOfDie) {\n        this.handleSpotOn()\n      }\n      if (currentBid.quantity > actualNumberOfDie) {\n        this.handleGreaterThan()\n      }\n      if (currentBid.quantity < actualNumberOfDie) {\n        this.handleLessThan()\n      }\n      this.removeWinners()\n      if (this.isEndGame()) {\n        this.handleEndGame()\n      }\n      this.startNewRound()\n      return true\n    } catch (error) {\n      return error\n    }\n  }\n\n  handleSpotOn() {\n    this.handleLessThan()\n  }\n\n  handleLessThan() {\n    const loserId = this.getCurrentPlayer().id\n    this.players = this.removeDice(loserId)\n  }\n\n  handleGreaterThan() {\n    const loserId = this.getCurrentBid().playerId\n    this.players = this.removeDice(loserId)\n  }\n\n  private removeDice(excludedPlayerId: number): GamePlayer[] {\n    return this.players.map(player => {\n      if (player.id !== excludedPlayerId) {\n        player.hand = this.generateHand(player.hand.length - 1)\n      } else {\n        player.hand = this.generateHand(player.hand.length)\n      }\n      return player\n    })\n  }\n\n  removeWinners() {\n    this.winners = [...this.winners, ...this.players.filter(player => player.hand.length === 0)]\n    this.players = [...this.players.filter(player => player.hand.length !== 0)]\n  }\n\n  isEndGame() {\n    return this.players.length === 1\n  }\n\n  handleEndGame() {\n    this.losers = this.players\n    this.players = []\n  }\n  // TODO: make sure we are handling who the first to act is next round\n  startNewRound() {\n    this.roundHistory = [...this.roundHistory, this.bids]\n    this.bids = []\n  }\n  get round() {\n    return this.roundHistory.length\n  }\n  printGameState() {\n    console.log(this)\n  }\n}\nlet game = new Liars(1, {})\ngame.addPlayers([{ id: 1, name: 'Rob' }, { id: 2, name: 'Lela' }])\ngame.startGame()\n// console.log(game.players[0])\n// game.printGameState()\ngame.makeBid({ quantity: 2, face: 3 })\ngame.makeBid({ quantity: 2, face: 3 })\ngame.makeBid({ quantity: 10, face: 2 })\ngame.logger.printAll()\n// console.log(game.players)\n// console.log(game.players)\n// game.printGameState()\n// game.makeBid({ quantity: 2, face: 6 })\n// game.makeBid({ quantity: 1, face: 2 })\n// console.log(game.bids)\n\n// console.log('result: %j', game.getNumberOfDie(3))\n"],"names":[],"mappings":"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"}